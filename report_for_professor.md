# Отчет о выполнении лабораторной работы
## Тема: Использование фильтра Калмана в задаче определения ориентации тела

### 1. Поставленная задача
Целью работы было изучение и программная реализация алгоритмов фильтрации Калмана для оценки состояния динамической системы (тела, подвешенного на струне) на основе теоретических материалов методического пособия.

### 2. Реализованные модели
В ходе работы на языке Python были реализованы три математические модели фильтра Калмана:

1.  **Модель "Перманентное вращение" (Constant Velocity)**
    *   *Описание:* Простейшая кинематическая модель, предполагающая вращение с постоянной скоростью ($\ddot{x} = 0$).
    *   *Назначение:* Базовая оценка, не требующая знания физических параметров системы.

2.  **Модель "Крутильные колебания" (Harmonic Oscillator)**
    *   *Описание:* Физически корректная модель, основанная на уравнении гармонического осциллятора ($\ddot{x} + \omega^2 x = 0$).
    *   *Назначение:* Обеспечивает наилучшую точность при условии точного знания параметров системы (собственной частоты $\omega$).

3.  **Адаптивный фильтр Калмана (Adaptive Kalman Filter)**
    *   *Описание:* Реализация метода "Уточнение ковариации" (раздел 1.6 методического пособия).
    *   *Назначение:* Автоматическая подстройка матрицы ковариации шума процесса ($Q$) в реальном времени. Позволяет фильтру сохранять устойчивость и точность даже при неверно заданных параметрах модели.

### 3. Проведенные эксперименты и результаты

Для верификации алгоритмов была разработана среда имитационного моделирования. 
**Параметры эксперимента:**
*   Время симуляции: **100.0 с**
*   Уровень шума измерений ($\sigma$): **0.8** (для моделей), **1.5** (для экспериментов), **2.5** (для сравнения методов).

**Ключевые результаты:**

*   **Точность (RMSE):** В условиях точного знания параметров гармоническая модель показала ошибку **RMSE ~0.247**, что подтверждается попаданием ошибки в доверительный интервал $3\sigma$ (см. `kalman_3sigma.png`).
*   **Анализ устойчивости (Robustness):** Был проведен эксперимент с намеренным введением ошибки в параметры модели (рассинхронизация частоты).
    *   *Результат:* Стандартный гармонический фильтр показал ошибку **RMSE ~3.60**. Адаптивный фильтр успешно скорректировал свои параметры и снизил ошибку до **RMSE ~1.01**, что в **3.5 раза точнее**. (см. `kalman_experiments.png`)

### 4. Сравнение с другими методами
Дополнительно было проведено сравнение фильтра Калмана с классическими методами сглаживания: **Скользящим средним (Moving Average)** и **Экспоненциальным сглаживанием (EMA)** в условиях сильного шума ($\sigma=2.5$).

*   **Результат (см. `method_comparison.png`):**
    *   Скользящее среднее (MA): RMSE ~1.40
    *   Экспоненциальное сглаживание (EMA): RMSE ~1.33
    *   **Фильтр Калмана**: RMSE ~0.23
    *   **Вывод:** Фильтр Калмана снижает ошибку более чем в **6 раз** по сравнению с простыми методами, при этом практически не внося задержки (фазового сдвига).

### 5. Теоретическое обоснование
В работе используется **Правило 3-х сигм** для оценки качества фильтрации. Согласно теории нормального распределения, 99.7% ошибок оценки должны находиться в пределах $\pm 3\sigma$, где $\sigma$ рассчитывается из ковариационной матрицы $P$ фильтра. Графики подтверждают выполнение этого условия.

---
**Вывод:** Работа демонстрирует преимущество использования физически обоснованных моделей перед кинематическими, а также необходимость применения адаптивных алгоритмов в условиях неопределенности параметров реальной системы.

# Руководство по реализации фильтра Калмана

Я реализовал модели фильтра Калмана, описанные в файле "Фильтр Калмана.pdf", используя Python. Эта реализация фокусируется на читаемости и понимании лежащей в основе математики.

## Созданные файлы

- **[kalman_models.py](file:///home/cuga/kalmanFilter/kalman_models.py)**: Основной скрипт Python, содержащий:
    - Класс `KalmanFilter`: Стандартный дискретный фильтр Калмана.
    - Класс `AdaptiveKalmanFilter`: Реализует алгоритм "Уточнения ковариации".
    - `run_simulation()`: Демонстрационная функция, которая генерирует синтетические данные (Гармонический осциллятор) и сравнивает фильтры.

## Реализованные модели

1.  **Перманентное вращение (Постоянная скорость)**
    - Предполагает нулевое ускорение ($\ddot{\phi}=0$).
    - Хороший базовый уровень, но физически неверен для маятника/пружины.
2.  **Крутильные колебания (Гармонический осциллятор)**
    - Использует точную физическую модель ($\ddot{\phi} + \omega^2\phi = 0$).
    - Теоретически должен работать лучше всего, если параметры известны идеально.
3.  **Адаптивный фильтр**
    - Начинает с оценки шума процесса $Q$ и уточняет её с течением времени, используя ковариацию инноваций.

## Результаты верификации

Я запустил симуляцию с обновленными параметрами для большей наглядности:
- Время: 50 секунд
- Частота: 2.0 рад/с
- Амплитуда: 5.0
- Шум измерений: 1.0

**Результаты MSE (Среднеквадратичная ошибка):**
- Модель 1 (Постоянная скорость): 19.910449
- Модель 2 (Гармоническая): 0.040773
- Модель 3 (Адаптивная): 0.042451

*Примечание: При увеличенном времени и шуме разница между моделями стала очевидной. Модель "Постоянная скорость" не справляется с динамикой осциллятора (большая ошибка), в то время как гармоническая и адаптивная модели показывают отличные результаты.*

## Как запустить

Все Python-скрипты теперь находятся в папке `python/`. Для запуска используйте виртуальное окружение внутри этой папки:

1.  **Основная симуляция:**
    ```bash
    cd python
    venv/bin/python kalman_models.py
    ```
    Результат: `python/kalman_results.html`

2.  **Эксперименты (Доказательство):**
    ```bash
    cd python
    venv/bin/python kalman_experiments.py
    ```
    Результат: `python/kalman_experiments.html`

3.  **Сравнение методов:**
    ```bash
    cd python
    venv/bin/python comparison_methods.py
    ```
    Результат: `python/method_comparison.html`

Это создаст отчет `kalman_experiments.html`, содержащий два сценария:
1.  **Идеальное совпадение**: Модель точно знает частоту колебаний. Все фильтры работают хорошо.
2.  **Ошибка модели (Рассинхронизация)**: Истинная частота — 2.0 рад/с, но модели "думают", что она 1.5 рад/с.
    *   **Гармоническая модель (Зеленая)**: Начинает сильно ошибаться по фазе, так как верит своей неверной математике.
    *   **Адаптивная модель (Синяя)**: Обнаруживает ошибку, автоматически увеличивает параметр шума процесса (Q) и начинает больше доверять измерениям, тем самым спасая ситуацию и продолжая отслеживать сигнал.

График `Trace(Q)` внизу отчета показывает, как адаптивный фильтр "понимает", что модель врет, и увеличивает неопределенность.

`xdg-open kalman_results.html`, чтобы открыть плот в html
